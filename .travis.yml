language: elixir
elixir:
    - 1.3.2
addons:
    postgresql: '9.4'
install:
    - mix local.rebar --force
    - mix local.hex --force
    - mix deps.get
    - nvm install 6.3.1
    - npm install
before_script:
    - phantomjs -w --webdriver-loglevel=ERROR &
    - psql -c 'create database rosa_test;' -U postgres
    - cp config/travis.exs config/test.exs
script:
    - npm run build
    - npm test
    - mix test
    - npm run lint
